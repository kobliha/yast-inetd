{

include "testsuite.ycp";
import "Inetd.ycp";

map s = $[
    "iid": "whatever",
    "comment": "My service",
    "enabled": true,
    "service": "finger",
    "socket_type": "stream",
    "protocol": "tcp",
    "wait": false,
    "user": "nobody",
    "server": "/usr/sbin/tcpd",
    "server_args": "in.fingerd -w",
    ];

map READ = $[
    "target" : $[
	"size" : -1,
    ],
    "init" : $[
	"scripts" : $[
	    "exists" : true,
	]
    ],
    "etc" : $[
	"inetd_conf" : $[
	    "services" : [ s ],
	    ],
	],
];

DUMP("Read");
Inetd::netd_service = `inetd;
TEST(``(Inetd::Read()), [READ], nil);

}
